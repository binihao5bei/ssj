 # coding=utf-8import datetimeimport time# ===站点定义# from web_testerhome import Testerhome# from web_ltest import Ltest#from web_51testing import Testing51#from web_cnblog import Cnblog# ===微信爬虫站点定义#from wx_infoq import Wx_infoqfrom wb_ukylin import Wb_ukylinfrom wb_neokylin import Wb_neokylin#from wx_importnew import WX_importnew#from wx_zz import Wx_zz#from wx_dsj import Wx_dsj#from wx_sgcs import Wx_sgcs# 自定义函数from func import htmlmake, sendmailnow#, add_db, add_wiki, tablemake# ===站点类清单weblist = []# 网页爬虫#weblist += [Testing51]# weblist += [Testerhome, Testing51, Ltest, Cnblog]#weblist += [Testing51, Cnblog]# 微信爬虫# weblist += [Wx_infoq, Wx_qunar, WX_importnew, Wx_zz, Wx_dsj, Wx_sgcs]weblist += [Wb_ukylin,Wb_neokylin]# 初始化参数datalists = []#获取当前系统时间'''times=time.time()timeArray=time.localtime(times)nowdate=time.strftime("%Y-%m-%d",timeArray)'''# 每日最大发布记录条数maxnum = 10# ===测试用自定义日期nowdate = '2020-12-28'# 遍历网站类列表for webclass in weblist:    # 类定义    web = webclass(nowdate)    # 数据获取 #   web.weChat_login()    datalists += web.get_data()def DelRepeat(data,key):    new_data = [] # 用于存储去重后的list      values = []  # 用于存储当前已有的值      for d in data:          if d[key] not in values:              new_data.append(d)          values.append(d[key])      return new_data # 打印最终结果#print(datalists)print("==总共抓取到：" + str(len(datalists)) + "条记录。")'''# 写数据库if len(datalists)>0:    add_db(datalists)'''# 发邮件if __name__ == '__main__':    if len(datalists) > 0:        mail_msg = htmlmake(maxnum, datalists)        sendmailnow(["sunshijiang@sogou-inc.com"], "【今日最新消息】" + str(nowdate), mail_msg)        #nowdate = datetime.datetime.now().strftime('%Y-%m-%d')'''        # 发布到wiki        pageConnect = tablemake(datalists)        add_wiki(str(nowdate), pageConnect)'''        #sendmailnow(["bussqa@sogou-inc.com", "setest@sogou-inc.com", "pdatest@sogou-inc.com"], "【今日最新消息】" + str(nowdate), mail_msg)        